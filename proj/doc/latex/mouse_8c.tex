\hypertarget{mouse_8c}{}\doxysection{C\+:/\+Users/\+João Costa/\+Desktop/\+FEUP/\+MINIX-\/\+LCOM/shared/g1/proj/src/devices/mouse/mouse.c File Reference}
\label{mouse_8c}\index{C:/Users/João Costa/Desktop/FEUP/MINIX-\/LCOM/shared/g1/proj/src/devices/mouse/mouse.c@{C:/Users/João Costa/Desktop/FEUP/MINIX-\/LCOM/shared/g1/proj/src/devices/mouse/mouse.c}}
{\ttfamily \#include $<$lcom/lcf.\+h$>$}\newline
{\ttfamily \#include $<$lcom/timer.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include \char`\"{}mouse.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}i8042\+\_\+mouse.\+h\char`\"{}}\newline
Include dependency graph for mouse.\+c\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
uint16\+\_\+t \mbox{\hyperlink{mouse_8c_aab419752e6dafdebf819c7c65397bf34}{convert\+\_\+2\+\_\+complement}} (uint8\+\_\+t number, uint8\+\_\+t msb, struct packet $\ast$\mbox{\hyperlink{mouse_8c_a0cbe638898326d1fdb5adc7152c8b9fb}{pkt}})
\item 
int \mbox{\hyperlink{mouse_8c_a9da18257ff113b686bb826d154bfaa87}{mouse\+\_\+subscribe\+\_\+int}} (uint8\+\_\+t $\ast$bit\+\_\+no)
\begin{DoxyCompactList}\small\item\em This function uses irq\+\_\+setpolicy to configure mouse interrupts. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{mouse_8c_a685ad2706aca36d9869a30a19b9f446a}{mouse\+\_\+unsubscribe\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em This function unsubscribes mouse interrupts. \end{DoxyCompactList}\item 
bool() \mbox{\hyperlink{mouse_8c_aace521da31210ae7d184da0bb7fe10ea}{check\+\_\+input\+\_\+buffer}} ()
\begin{DoxyCompactList}\small\item\em This function checks the mouse input buffer. \end{DoxyCompactList}\item 
bool() \mbox{\hyperlink{mouse_8c_a20d184ea01a7a04b946c79c19d5c4ca7}{check\+\_\+output\+\_\+buffer}} ()
\begin{DoxyCompactList}\small\item\em This function checks the mouse output buffer. \end{DoxyCompactList}\item 
void() \mbox{\hyperlink{mouse_8c_a210374b50462acdedab00df64d5cea3c}{mouse\+\_\+ih}} ()
\begin{DoxyCompactList}\small\item\em Mouse\textquotesingle{}s input handler. \end{DoxyCompactList}\item 
void() \mbox{\hyperlink{mouse_8c_afa1d830593e339e7f2e4c98bbffd20ff}{build\+Packet}} (struct packet $\ast$\mbox{\hyperlink{mouse_8c_a0cbe638898326d1fdb5adc7152c8b9fb}{pkt}})
\begin{DoxyCompactList}\small\item\em When mouse packet array has stored all the necessary bytes this functions interprets it and updates mouse information. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{mouse_8c_a74456022e2b29fbc3741dc59bd5033be}{mouse\+\_\+enable\+\_\+data\+\_\+report}} ()
\begin{DoxyCompactList}\small\item\em This function enables data reporting from the mouse by sending the appropriate command to the mouse. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{mouse_8c_a96841fd4b45902aa9e1124a8b1814e3b}{mouse\+\_\+disable\+\_\+data\+\_\+report}} ()
\begin{DoxyCompactList}\small\item\em This function disables data reporting from the mouse device by sending the appropriate command to the mouse. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{mouse_8c_ade314a04247b0f06b713297da4978e7b}{mouse\+\_\+write\+\_\+cmd}} (uint32\+\_\+t cmd, uint8\+\_\+t $\ast$resp)
\begin{DoxyCompactList}\small\item\em This function writes a command to the mouse and retrieves the response from the mouse device. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{mouse_8c_ac0e3300ce72ec737a822a22936b4e74e}{mouse\+\_\+stream}} ()
\begin{DoxyCompactList}\small\item\em This function enables the mouse to send data packets in stream mode. \end{DoxyCompactList}\item 
int() \mbox{\hyperlink{mouse_8c_a8ede930d34433ca1e2cce6990d7a9898}{mouse\+\_\+read\+\_\+data}} ()
\begin{DoxyCompactList}\small\item\em This function reads data from the mouse device. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
uint8\+\_\+t \mbox{\hyperlink{mouse_8c_a43b27e98dc15b81b7d54d7944480be5b}{scan\+\_\+bytes\+\_\+mouse}} \mbox{[}3\mbox{]}
\item 
uint8\+\_\+t \mbox{\hyperlink{mouse_8c_aa1de7a5557e9d96b83cf03f73c92163f}{scancode}}
\item 
bool \mbox{\hyperlink{mouse_8c_a2817f4ae4dfa1b8645696f7ca327d80b}{codecomplete\+\_\+mouse}} = false
\item 
int \mbox{\hyperlink{mouse_8c_a457c986b6ff74710a61108f1ac42faa7}{nrbytes\+\_\+mouse}} = 0
\item 
struct packet \mbox{\hyperlink{mouse_8c_a0cbe638898326d1fdb5adc7152c8b9fb}{pkt}}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{mouse_8c_afa1d830593e339e7f2e4c98bbffd20ff}\label{mouse_8c_afa1d830593e339e7f2e4c98bbffd20ff}} 
\index{mouse.c@{mouse.c}!buildPacket@{buildPacket}}
\index{buildPacket@{buildPacket}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{buildPacket()}{buildPacket()}}
{\footnotesize\ttfamily void() build\+Packet (\begin{DoxyParamCaption}\item[{struct packet $\ast$}]{pacote }\end{DoxyParamCaption})}



When mouse packet array has stored all the necessary bytes this functions interprets it and updates mouse information. 


\begin{DoxyParams}{Parameters}
{\em pacote} & An object of the type packet. \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
% FIG 1
Here is the caller graph for this function\+:
% FIG 2
\mbox{\Hypertarget{mouse_8c_aace521da31210ae7d184da0bb7fe10ea}\label{mouse_8c_aace521da31210ae7d184da0bb7fe10ea}} 
\index{mouse.c@{mouse.c}!check\_input\_buffer@{check\_input\_buffer}}
\index{check\_input\_buffer@{check\_input\_buffer}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{check\_input\_buffer()}{check\_input\_buffer()}}
{\footnotesize\ttfamily bool() check\+\_\+input\+\_\+buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function checks the mouse input buffer. 

\begin{DoxyReturn}{Returns}
Return true if case of success, false otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 3
Here is the caller graph for this function\+:
% FIG 4
\mbox{\Hypertarget{mouse_8c_a20d184ea01a7a04b946c79c19d5c4ca7}\label{mouse_8c_a20d184ea01a7a04b946c79c19d5c4ca7}} 
\index{mouse.c@{mouse.c}!check\_output\_buffer@{check\_output\_buffer}}
\index{check\_output\_buffer@{check\_output\_buffer}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{check\_output\_buffer()}{check\_output\_buffer()}}
{\footnotesize\ttfamily bool() check\+\_\+output\+\_\+buffer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function checks the mouse output buffer. 

\begin{DoxyReturn}{Returns}
Return true if case of success, false otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 5
Here is the caller graph for this function\+:
% FIG 6
\mbox{\Hypertarget{mouse_8c_aab419752e6dafdebf819c7c65397bf34}\label{mouse_8c_aab419752e6dafdebf819c7c65397bf34}} 
\index{mouse.c@{mouse.c}!convert\_2\_complement@{convert\_2\_complement}}
\index{convert\_2\_complement@{convert\_2\_complement}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{convert\_2\_complement()}{convert\_2\_complement()}}
{\footnotesize\ttfamily uint16\+\_\+t convert\+\_\+2\+\_\+complement (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{number,  }\item[{uint8\+\_\+t}]{msb,  }\item[{struct packet $\ast$}]{pkt }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
% FIG 7
\mbox{\Hypertarget{mouse_8c_a96841fd4b45902aa9e1124a8b1814e3b}\label{mouse_8c_a96841fd4b45902aa9e1124a8b1814e3b}} 
\index{mouse.c@{mouse.c}!mouse\_disable\_data\_report@{mouse\_disable\_data\_report}}
\index{mouse\_disable\_data\_report@{mouse\_disable\_data\_report}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_disable\_data\_report()}{mouse\_disable\_data\_report()}}
{\footnotesize\ttfamily int() mouse\+\_\+disable\+\_\+data\+\_\+report (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function disables data reporting from the mouse device by sending the appropriate command to the mouse. 

\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 8
Here is the caller graph for this function\+:
% FIG 9
\mbox{\Hypertarget{mouse_8c_a74456022e2b29fbc3741dc59bd5033be}\label{mouse_8c_a74456022e2b29fbc3741dc59bd5033be}} 
\index{mouse.c@{mouse.c}!mouse\_enable\_data\_report@{mouse\_enable\_data\_report}}
\index{mouse\_enable\_data\_report@{mouse\_enable\_data\_report}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_enable\_data\_report()}{mouse\_enable\_data\_report()}}
{\footnotesize\ttfamily int() mouse\+\_\+enable\+\_\+data\+\_\+report (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function enables data reporting from the mouse by sending the appropriate command to the mouse. 

\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 10
Here is the caller graph for this function\+:
% FIG 11
\mbox{\Hypertarget{mouse_8c_a210374b50462acdedab00df64d5cea3c}\label{mouse_8c_a210374b50462acdedab00df64d5cea3c}} 
\index{mouse.c@{mouse.c}!mouse\_ih@{mouse\_ih}}
\index{mouse\_ih@{mouse\_ih}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_ih()}{mouse\_ih()}}
{\footnotesize\ttfamily void() mouse\+\_\+ih (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Mouse\textquotesingle{}s input handler. 

Here is the call graph for this function\+:
% FIG 12
Here is the caller graph for this function\+:
% FIG 13
\mbox{\Hypertarget{mouse_8c_a8ede930d34433ca1e2cce6990d7a9898}\label{mouse_8c_a8ede930d34433ca1e2cce6990d7a9898}} 
\index{mouse.c@{mouse.c}!mouse\_read\_data@{mouse\_read\_data}}
\index{mouse\_read\_data@{mouse\_read\_data}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_read\_data()}{mouse\_read\_data()}}
{\footnotesize\ttfamily int() mouse\+\_\+read\+\_\+data (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function reads data from the mouse device. 

\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 14
\mbox{\Hypertarget{mouse_8c_ac0e3300ce72ec737a822a22936b4e74e}\label{mouse_8c_ac0e3300ce72ec737a822a22936b4e74e}} 
\index{mouse.c@{mouse.c}!mouse\_stream@{mouse\_stream}}
\index{mouse\_stream@{mouse\_stream}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_stream()}{mouse\_stream()}}
{\footnotesize\ttfamily int() mouse\+\_\+stream (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function enables the mouse to send data packets in stream mode. 

\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 15
\mbox{\Hypertarget{mouse_8c_a9da18257ff113b686bb826d154bfaa87}\label{mouse_8c_a9da18257ff113b686bb826d154bfaa87}} 
\index{mouse.c@{mouse.c}!mouse\_subscribe\_int@{mouse\_subscribe\_int}}
\index{mouse\_subscribe\_int@{mouse\_subscribe\_int}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_subscribe\_int()}{mouse\_subscribe\_int()}}
{\footnotesize\ttfamily int mouse\+\_\+subscribe\+\_\+int (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{bit\+\_\+no }\end{DoxyParamCaption})}



This function uses irq\+\_\+setpolicy to configure mouse interrupts. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em bit\+\_\+no} & All zeros except for the bit position of the timer\textquotesingle{}s hook id \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the caller graph for this function\+:
% FIG 16
\mbox{\Hypertarget{mouse_8c_a685ad2706aca36d9869a30a19b9f446a}\label{mouse_8c_a685ad2706aca36d9869a30a19b9f446a}} 
\index{mouse.c@{mouse.c}!mouse\_unsubscribe\_int@{mouse\_unsubscribe\_int}}
\index{mouse\_unsubscribe\_int@{mouse\_unsubscribe\_int}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_unsubscribe\_int()}{mouse\_unsubscribe\_int()}}
{\footnotesize\ttfamily int mouse\+\_\+unsubscribe\+\_\+int (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



This function unsubscribes mouse interrupts. 

\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the caller graph for this function\+:
% FIG 17
\mbox{\Hypertarget{mouse_8c_ade314a04247b0f06b713297da4978e7b}\label{mouse_8c_ade314a04247b0f06b713297da4978e7b}} 
\index{mouse.c@{mouse.c}!mouse\_write\_cmd@{mouse\_write\_cmd}}
\index{mouse\_write\_cmd@{mouse\_write\_cmd}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{mouse\_write\_cmd()}{mouse\_write\_cmd()}}
{\footnotesize\ttfamily int() mouse\+\_\+write\+\_\+cmd (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{cmd,  }\item[{uint8\+\_\+t $\ast$}]{resp }\end{DoxyParamCaption})}



This function writes a command to the mouse and retrieves the response from the mouse device. 


\begin{DoxyParams}{Parameters}
{\em cmd} & the command to be written to the mouse \\
\hline
{\em resp} & pointer to a variable where the response from the mouse will be stored \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Return 0 if case of success, 1 if otherwise 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 18
Here is the caller graph for this function\+:
% FIG 19


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{mouse_8c_a2817f4ae4dfa1b8645696f7ca327d80b}\label{mouse_8c_a2817f4ae4dfa1b8645696f7ca327d80b}} 
\index{mouse.c@{mouse.c}!codecomplete\_mouse@{codecomplete\_mouse}}
\index{codecomplete\_mouse@{codecomplete\_mouse}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{codecomplete\_mouse}{codecomplete\_mouse}}
{\footnotesize\ttfamily bool codecomplete\+\_\+mouse = false}

\mbox{\Hypertarget{mouse_8c_a457c986b6ff74710a61108f1ac42faa7}\label{mouse_8c_a457c986b6ff74710a61108f1ac42faa7}} 
\index{mouse.c@{mouse.c}!nrbytes\_mouse@{nrbytes\_mouse}}
\index{nrbytes\_mouse@{nrbytes\_mouse}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{nrbytes\_mouse}{nrbytes\_mouse}}
{\footnotesize\ttfamily int nrbytes\+\_\+mouse = 0}

\mbox{\Hypertarget{mouse_8c_a0cbe638898326d1fdb5adc7152c8b9fb}\label{mouse_8c_a0cbe638898326d1fdb5adc7152c8b9fb}} 
\index{mouse.c@{mouse.c}!pkt@{pkt}}
\index{pkt@{pkt}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{pkt}{pkt}}
{\footnotesize\ttfamily struct packet pkt}

\mbox{\Hypertarget{mouse_8c_a43b27e98dc15b81b7d54d7944480be5b}\label{mouse_8c_a43b27e98dc15b81b7d54d7944480be5b}} 
\index{mouse.c@{mouse.c}!scan\_bytes\_mouse@{scan\_bytes\_mouse}}
\index{scan\_bytes\_mouse@{scan\_bytes\_mouse}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{scan\_bytes\_mouse}{scan\_bytes\_mouse}}
{\footnotesize\ttfamily uint8\+\_\+t scan\+\_\+bytes\+\_\+mouse\mbox{[}3\mbox{]}}

\mbox{\Hypertarget{mouse_8c_aa1de7a5557e9d96b83cf03f73c92163f}\label{mouse_8c_aa1de7a5557e9d96b83cf03f73c92163f}} 
\index{mouse.c@{mouse.c}!scancode@{scancode}}
\index{scancode@{scancode}!mouse.c@{mouse.c}}
\doxysubsubsection{\texorpdfstring{scancode}{scancode}}
{\footnotesize\ttfamily uint8\+\_\+t scancode}

